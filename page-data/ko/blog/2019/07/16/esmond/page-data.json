{"componentChunkName":"component---src-templates-post-tsx","path":"/ko/blog/2019/07/16/esmond/","result":{"data":{"site":{"siteMetadata":{"title":"클래스101 기술 블로그","author":"class101","siteUrl":"https://class101.dev"}},"markdownRemark":{"id":"98bad9b8-df50-594c-9e17-72141a722791","tableOfContents":"<ul>\n<li><a href=\"/blog/2019/07/16/esmond/#overview\">Overview</a></li>\n<li><a href=\"/blog/2019/07/16/esmond/#%EA%B0%9C%EB%B0%9C-%EB%B0%B0%EA%B2%BD-%EB%B0%8F-%EB%AA%A9%ED%91%9C\">개발 배경 및 목표</a></li>\n<li>\n<p><a href=\"/blog/2019/07/16/esmond/#%EA%B0%9D%EC%B2%B4-%EC%88%98%EC%B9%98%ED%99%94%EB%A5%BC-%EC%9C%84%ED%95%9C-%EC%9C%A0%EC%82%AC%EB%8F%84-%EC%B8%A1%EC%A0%95%EB%B2%95-%EC%A1%B0%EC%82%AC\">객체 수치화를 위한 유사도 측정법 조사</a></p>\n<ul>\n<li><a href=\"/blog/2019/07/16/esmond/#euclidean-distance\">Euclidean Distance</a></li>\n<li><a href=\"/blog/2019/07/16/esmond/#manhattan-distance\">Manhattan Distance</a></li>\n<li><a href=\"/blog/2019/07/16/esmond/#cosine-similarity\">Cosine Similarity</a></li>\n</ul>\n</li>\n<li><a href=\"/blog/2019/07/16/esmond/#%EA%B0%9C%EB%B0%9C-%EA%B3%BC%EC%A0%95\">개발 과정</a></li>\n<li><a href=\"/blog/2019/07/16/esmond/#conclusion\">Conclusion</a></li>\n<li><a href=\"/blog/2019/07/16/esmond/#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n<li><a href=\"/blog/2019/07/16/esmond/#%EC%B0%B8%EA%B3%A0%EB%AC%B8%ED%97%8C\">참고문헌</a></li>\n</ul>","excerpt":"Overview 클래스101에서 추천 서버를 담당하고 있는 Esmond입니다. 최근에 TF-IDF(Term Frequency - Inverse Document Frequency)를 활용해 클래스 간의 유사도를 분석하고 이를 API로 올렸습니다. 그 개발 과정과 이를 통해 앞으로 개선할 점을 두 편의 글로 쓰겠습니다. 개발 배경 및 목표 클래스101 앱에서 볼 수 있는 수백 개의 클래스를 어떻게 분류할 수 있을까요? 우리는 크게 두 가지의 기준을 가지고 있습니다. 첫째, 클래스가 처음 제작될 때 지정되는 클래스의 카테고리로 분류한다…","html":"<h2>Overview</h2>\n<p>클래스101에서 추천 서버를 담당하고 있는 Esmond입니다. 최근에 TF-IDF(Term Frequency - Inverse Document Frequency)를 활용해 클래스 간의 유사도를 분석하고 이를 API로 올렸습니다. 그 개발 과정과 이를 통해 앞으로 개선할 점을 두 편의 글로 쓰겠습니다.</p>\n<h2>개발 배경 및 목표</h2>\n<p>클래스101 앱에서 볼 수 있는 수백 개의 클래스를 어떻게 분류할 수 있을까요? 우리는 크게 두 가지의 기준을 가지고 있습니다.</p>\n<p>첫째, 클래스가 처음 제작될 때 지정되는 클래스의 카테고리로 분류한다.</p>\n<p>둘째, 클래스 오픈이 확정된 이후 비슷한 주제로 엮이는 클래스의 컬렉션으로 분류한다.</p>\n<p>요즘은 클래스101이 빠르게 성장하면서 늘어난 유저에게 카테고리나 컬렉션과 같이 간단한 추천만 하기엔 역부족으로 보입니다. 보다 구체적으로 추천할 수 있는 로직이 필요해졌기에, 개발팀에서는 ‘클래스 간의 유사도’라는 지표를 분석하고 활용해보기로 결정했습니다. 이번 개발로 우리는 세 가지의 기능을 구현하기로 했습니다.</p>\n<ul>\n<li>모든 클래스에 대해 유사도가 높은 N개의 클래스를 DB에 저장한다.</li>\n<li>클래스가 추가될 때마다 자동으로 해당 데이터를 갱신한다.</li>\n<li>API로 오픈되어 어플리케이션 Layer에서 쉽게 접근할 수 있도록 한다.</li>\n</ul>\n<h2>객체 수치화를 위한 유사도 측정법 조사</h2>\n<p>클래스 간의 유사도를 추출하려면 먼저 유사도를 측정하는 여러가지 방법들을 알아야 합니다. 지금부터 소개하는 Euclidean Distance, Manhattan Distance, Cosine Similarity는 자주 쓰이는 유사도 측정법입니다.</p>\n<h3>Euclidean Distance</h3>\n<p>가장 간단하고도 유명한 방법으로, 두 벡터 간의 직선 거리를 측정하는 방식입니다. 2차원에서는 피타고라스 정의로도 유명한 바로 그 방법입니다. 점 p = (p1, p2, …, pn), q = (q1, q2, …, qn) 에 대하여</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49747e27a04f569280364649225b30cf/48711/Untitled-d230bf87-2140-4196-8e40-871c0ac265de.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 459px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 8.714596949891067%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsSAAALEgHS3X78AAAAUUlEQVQI103NSQqAQBBD0YgLpRXBoaWdQAXp+9/QL2Th4lFQJFWSNKBFgQsJB1bcGD0DSjzImJ3LznzdE9rQoPciONxhQYUd9a84+Xj0Y7kTXxlpA1zY5MEDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Untitled d230bf87 2140 4196 8e40 871c0ac265de\"\n        title=\"\"\n        src=\"/static/49747e27a04f569280364649225b30cf/48711/Untitled-d230bf87-2140-4196-8e40-871c0ac265de.png\"\n        srcset=\"/static/49747e27a04f569280364649225b30cf/12f09/Untitled-d230bf87-2140-4196-8e40-871c0ac265de.png 148w,\n/static/49747e27a04f569280364649225b30cf/e4a3f/Untitled-d230bf87-2140-4196-8e40-871c0ac265de.png 295w,\n/static/49747e27a04f569280364649225b30cf/48711/Untitled-d230bf87-2140-4196-8e40-871c0ac265de.png 459w\"\n        sizes=\"(max-width: 459px) 100vw, 459px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>와 같이 계산합니다.</p>\n<h3>Manhattan Distance</h3>\n<p>Taxicab geometry라고도 합니다. 다음과 같이 정사각형으로 나뉜 공간에서 좌표로 표시된 한 점이 다른 한 점으로 가는 길의 거리입니다.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8d9d444544155b7d57bdb9b8e829d3da/772e8/Untitled-6d28fa68-102f-48d2-81df-d940175de695.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 200px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAE3klEQVQ4yzVVXWxTZRg+XBGuvNCoV0O5cVdgAndEZkATlEQk6qJCiIhMhMRkILiA2U9/oFtL27VdwbXrfmhX99P1+07Pb0972vXnrCtu6/gzbG4leoEihmziiCSjvu9p1+TN97Y9ffI97/M8bxkGXpFE4r3g/Hy93ieTTXi6nj17YVxVD2M/ks/vHs1m38Z+PJVqDNwvv4q9kBW/wXP6cfp1NT15kNkAi/f3P8lZLNOaweBTPZ7neZMpnO3slFJu97+FtjZP2uFYTDud5UJrqyvlcq1kurpSBZNhKGwaqniPTwRaDhjUr44efcpL0idMsFSqz1osBdXt7gXgI0I4vKz4/aflgQED9DeTXu9HYjBIxFBIUHt6DvKh8M/y4KCVOAMnHAa5PGpTj31tOxzpsDTOcZHSm/otNaOxFwCOYE85btaxvr4Z6G4nPB/Hz4ggtEJZsOfkGEnNkgbsu7u1eWaNqeuZ++7UXc09sEG5CWiuw22WCMfNsJSuQd2Euge1ClWEekAI+6fAk+neXmXFZs0s2izaTPO1vmc+0b+o0MgvCcG1HiHKWR00bzaH4kDTXqlshh/fopRuhdoLlcbvWZZ2xWLUjb3ZnBeNF0qHXoztfOtazLdU+bGyRRKuHs3FL08wG2qCACLODGkC4AKCsSz7BaVsEcC2wdkXDImhTnOhztReTJ6K/mA3Fc58KlFxIUzEXXG+/3xGtqr+n35/mRlPJg+jmigAzgxpAuAkgkH9zXFEGBqSykbDVNneqXHfXu1b8cZ652UqKYQlTwjlEwIXnlMl91okmjip33Kqrc2Naur0KL1Ro7kNwbD3uFPfd9umjNj7E550KTqzvfZMCc+05NyrKcaADjaSy+0Gjy2CLQgo2QaAf8CDVqSJNwOwliudWqI54F1wJWxOYUK+AzcbhpFcguceEioYRC44AqDLYxOT7zKYAABcBkAerUEJ+xAFCIaEoMmolV02zdDc711w095plSYuANgSS9kxyrJ2liWPKOWsEnc9mpa6fxuLpt/XbwkJcKreng/1OPGkiGfX5ak6e5cW04VL2BwAdrFKkx2BGe/Q/UkFnXKcDzRoisGng4GyjSDKCj8cngHTUp9PWbl0KS+bO4oqCuBXeiZrNJcBbAxo4kgKlMb4hHhtFewSyyumaVX0rEaiyS8ZCPorGatVlYcGrek50nDFlvnVdLF0CK2BaqIAABaqgrE7AGwKwFpELrQfrHI/I9v2yfxAe4yN5gjltlYpmw0DpLv/BPYgwOxLsV170GdgjXiNphnKXlOWA6vsf3Bj9xaY252dZyqbJojcCCKOMrUVdHIYtoa9Qy47HVoJ44QJANPeI5T8AwBzqCbUX+CAWTjBp2yZi43fViXPU3h/Cz7HcVRgtud00J7jUf8IbA0MOmaz4qtswQQABaU2/A4oa7Xn2PFocl/lEbMJrHJbXyiUPQTAYR2s+Dj92vkDhmQTrCDYGqcx6JhNjBMmAE2LPoOZRSdl+x6BGy6ATdqz8a5GmF8ZwcBClupsaT2TSmc+wOWI++yu5hlMCO7nubglitkESmugYABmtYw+gzT4UpJ7dVK+kod+VBECFbhxGMGg/gPAz6tzlKWPN5bjBFHO6BGDoEM29b8DSMA7G6YFaxy7Pnpra/VZ+VyN8htwy8+w/x+0tIcUAntFYAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Untitled 6d28fa68 102f 48d2 81df d940175de695\"\n        title=\"\"\n        src=\"/static/8d9d444544155b7d57bdb9b8e829d3da/772e8/Untitled-6d28fa68-102f-48d2-81df-d940175de695.png\"\n        srcset=\"/static/8d9d444544155b7d57bdb9b8e829d3da/12f09/Untitled-6d28fa68-102f-48d2-81df-d940175de695.png 148w,\n/static/8d9d444544155b7d57bdb9b8e829d3da/772e8/Untitled-6d28fa68-102f-48d2-81df-d940175de695.png 200w\"\n        sizes=\"(max-width: 200px) 100vw, 200px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>점 p = (p1, p2, …, pn), q = (q1, q2, …, qn) 에 대하여</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1b3fc841c5ac5cdfeea1646993690292/908b1/Untitled-57fb3268-3025-4198-95d2-bc75e2bf275c.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 280px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 19.642857142857142%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAAZ0lEQVQY053PywqAIBCF4RZdaZGQRlDUIuhGm6L3f7Z+42xdlPAxKDNHjaLvK0aPPNQwYUSrmqHGigQGM0qk6HBqP+jMhztYH3hgU/CihgaXXuObblQKMZqxqj6s0KXux4/f0D00/ACRWwRBcvwksQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Untitled 57fb3268 3025 4198 95d2 bc75e2bf275c\"\n        title=\"\"\n        src=\"/static/1b3fc841c5ac5cdfeea1646993690292/908b1/Untitled-57fb3268-3025-4198-95d2-bc75e2bf275c.png\"\n        srcset=\"/static/1b3fc841c5ac5cdfeea1646993690292/12f09/Untitled-57fb3268-3025-4198-95d2-bc75e2bf275c.png 148w,\n/static/1b3fc841c5ac5cdfeea1646993690292/908b1/Untitled-57fb3268-3025-4198-95d2-bc75e2bf275c.png 280w\"\n        sizes=\"(max-width: 280px) 100vw, 280px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>와 같이 계산합니다.</p>\n<h3>Cosine Similarity</h3>\n<p>내적공간의 두 벡터에 대하여 벡터의 크기가 아닌 방향의 유사도를 판단하는 목적으로 사용합니다. 두 벡터의 방향이 비슷할 수록 유사도가 높다고 판단합니다. 두 벡터의 방향이 완전히 다를 경우(각도가 180°일 때)와 완전히 같을 경우(각도가 0°일 때)의 코사인 값 -1에서 1 사이의 값을 가집니다.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a58e7dd6118987ed6ebe119ded9f2e73/3d026/Untitled-477f1d55-4962-4ce0-a5b4-2ec9751bc69c.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 429px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 27.272727272727277%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAAsElEQVQY051QyQqFMBDr/3+aRw9KD+JW3MBdwT2SgfH2Li8QOknbkNbc943runCeJzgTz/PgOI5Pt22LoiiwLAsUPJ+mqexVVfX5xlqLMAyFvDTPM+I4Bv2u64S+78PzPARBgG3bvjPUfd9LIHXTNDBsQbKVzkpimiZkWYYoipAkiXh8EdsxQBvmeY66rmHwB8qylHAGcHXOiTcMAwyb/aL+p1Jbj+OIdV1l3vddtOIFFZSAJYwXWM0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Untitled 477f1d55 4962 4ce0 a5b4 2ec9751bc69c\"\n        title=\"\"\n        src=\"/static/a58e7dd6118987ed6ebe119ded9f2e73/3d026/Untitled-477f1d55-4962-4ce0-a5b4-2ec9751bc69c.png\"\n        srcset=\"/static/a58e7dd6118987ed6ebe119ded9f2e73/12f09/Untitled-477f1d55-4962-4ce0-a5b4-2ec9751bc69c.png 148w,\n/static/a58e7dd6118987ed6ebe119ded9f2e73/e4a3f/Untitled-477f1d55-4962-4ce0-a5b4-2ec9751bc69c.png 295w,\n/static/a58e7dd6118987ed6ebe119ded9f2e73/3d026/Untitled-477f1d55-4962-4ce0-a5b4-2ec9751bc69c.png 429w\"\n        sizes=\"(max-width: 429px) 100vw, 429px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>와 같이 계산합니다.</p>\n<p>위와 같은 유사도 측정법을 클래스에 적용하려면 먼저 클래스라는 개념적인 객체를 수치화하는 과정이 필요했습니다. 이 과정에서 활용되는 개념이 바로 벡터 공간 모델인 TF-IDF입니다. TF-IDF란 특정 Document에 등장하는 단어들이 해당 Document에서 얼마나 중요한지를 나타내는 통계적 수치입니다. 이 값이 높은 단어일수록 Document에서 중요한 단어라고 판단할 수 있습니다. 이 값은 TF(단어의 빈도)와 IDF(문서 빈도의 역수)의 곱으로 계산됩니다. 다시 말해 이 TF-IDF값을 활용하여 클래스를 Vectorization한 뒤 유사도를 측정하는 식으로 클래스 간 유사도를 계산한다고 할 수 있습니다. <a href=\"#footnote-1\">[1]</a></p>\n<h2>개발 과정</h2>\n<p>클래스라는 객체는 클래스 제목, 클래스 설명, 오픈 예정일, 크리에이터… 등등 여러 가지 속성을 가지고 있습니다. 이 모든 속성들을 전부 반영하여 클래스라는 개념을 수치화할 수 있다면 정말 좋겠지만, 우선은 클래스 제목과 설명 값만 가지고 유사도를 구해보기로 했습니다. TF-IDF를 활용한 vectorization과 유사도 분석은 관련 내장 함수들이 잘 갖춰진 scikit-learn을 사용했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pip install scikit<span class=\"token operator\">-</span>learn<span class=\"token operator\">==</span><span class=\"token number\">0.21</span><span class=\"token number\">.1</span></code></pre></div>\n<p>예제 문장에 대하여 TF-IDF를 활용해 Vectorization을 하고, 유사도(similarity)를 구해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>feature_extraction<span class=\"token punctuation\">.</span>text <span class=\"token keyword\">import</span> TfidfVectorizer\n\n\ndoc_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'프리시즌 아시아 투어를 떠나는 토트넘은 싱가포르, 중국을 차례로 방문해 ICC 경기를 치른다.'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'영국 \"풋볼 런던\"은 11일 \"토트넘이 ICC 첫 경기에서 가장 강력한 스쿼드로 유벤투스에 맞설 것\"이라고 평가했다.'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'토트넘에 합류하는 손흥민은 유벤투스전 출전을 목표로 구슬땀을 흘릴 예정이다.'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n\ntfidf_vectorizer <span class=\"token operator\">=</span> TfidfVectorizer<span class=\"token punctuation\">(</span>min_df<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\ntfidf_matrix <span class=\"token operator\">=</span> tfidf_vectorizer<span class=\"token punctuation\">.</span>fit_transform<span class=\"token punctuation\">(</span>doc_list<span class=\"token punctuation\">)</span>\ndoc_similarities <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>tfidf_matrix <span class=\"token operator\">*</span> tfidf_matrix<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>doc_similarities<span class=\"token punctuation\">.</span>toarray<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[[1.         0.04612956 0.        ]\n    [0.04612956 1.         0.        ]\n    [0.         0.         1.        ]]</code></pre></div>\n<p>여기서 1은 자기 자신과의 유사도를 의미합니다. 자기 자신과, 문장 형태가 아주 비슷한 케이스를 제외하고는 유사도가 그리 높지 않은 것을 알 수 있습니다. 그렇다면 konlpy와 같은 패키지를 사용해 특정 품사(명사)만 추출하고 유사도를 개선해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">pip install konlpy<span class=\"token operator\">==</span><span class=\"token number\">0.5</span><span class=\"token number\">.1</span>\n\n<span class=\"token keyword\">from</span> konlpy<span class=\"token punctuation\">.</span>tag <span class=\"token keyword\">import</span> Okt\n\n\nokt <span class=\"token operator\">=</span> Okt<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\ndoc_nouns_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>okt<span class=\"token punctuation\">.</span>nouns<span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> doc <span class=\"token keyword\">in</span> doc_list<span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>doc_nouns_list<span class=\"token punctuation\">)</span>\n\ntfidf_vectorizer <span class=\"token operator\">=</span> TfidfVectorizer<span class=\"token punctuation\">(</span>min_df<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\ntfidf_matrix <span class=\"token operator\">=</span> tfidf_vectorizer<span class=\"token punctuation\">.</span>fit_transform<span class=\"token punctuation\">(</span>doc_nouns_list<span class=\"token punctuation\">)</span>\ndoc_nouns_similarities <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>tfidf_matrix <span class=\"token operator\">*</span> tfidf_matrix<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>doc_nouns_similarities<span class=\"token punctuation\">.</span>toarray<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[\n    &#39;프리 시즌 아시아 투어 토트넘 싱가포르 중국 차례 방문 경기&#39;,\n    &#39;영국 풋볼 런던 은 토트넘 첫 경기 가장 스 쿼드로 유벤투스 것 평가&#39;,\n    &#39;토트넘 합류 손흥민 유벤투스 전 출전 목표 구슬 땀 예정&#39;\n]\n\n[[1.         0.11327504 0.04435806]\n    [0.11327504 1.         0.12859167]\n    [0.04435806 0.12859167 1.        ]]</code></pre></div>\n<p>결과를 보면 조금 더 정밀하게 유사도를 측정할 수 있게 되었다는 걸 알 수 있습니다.(a)</p>\n<p>지금부터는 실제 클래스 데이터들 간의 유사도를 계산하겠습니다. 10개의 카테고리에 대해서 클래스를 10개씩 총 100개의 샘플 클래스를 선정했습니다. 이제 상호 간 유사도를 측정한 뒤, 유사도 상위 10개의 클래스에 대하여 카테고리 일치 비율을 살펴보겠습니다. 이제부터 클래스는 product로 명명합니다.</p>\n<p>사전에 DB에서 다음과 같은 schema의 product 데이터 100개를 product_list 변수에 담아두었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"product_id\"</span><span class=\"token punctuation\">:</span> PRODUCT_ID<span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"category_id\"</span><span class=\"token punctuation\">:</span> CATEGORY_ID<span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"title\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"일러스트레이터 집시의 매력적인 얼굴 그리기\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"description\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"어떻게 그려도 예쁘고 멋진 비율과 비례, 매력과 생명력을 좌우하는 눈 코 입의...\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 할 일은 다음과 같습니다.</p>\n<ol>\n<li>title과 description의 명사들을 추출하여 새로운 product dictionary 목록을 만든다.</li>\n<li>title과 description에 대하여 각각 TfidfVectorizer로 vectorizing한 뒤 유사도를 계산하여 top 10개의 product id와 similarity 값을 저장한다.</li>\n<li>타겟 클래스와 카테고리가 일치하는 비율을 구한다.</li>\n<li>100개의 샘플 데이터에 대하여 타겟 클래스와 카테고리가 일치하는 비율의 평균을 구한다.</li>\n</ol>\n<p>각각의 기능들을 구현한 메소드와 실행 결과입니다.</p>\n<p>1.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> konlpy<span class=\"token punctuation\">.</span>tag <span class=\"token keyword\">import</span> Okt\n<span class=\"token keyword\">from</span> tqdm <span class=\"token keyword\">import</span> tqdm_notebook\n\n\nokt <span class=\"token operator\">=</span> Okt<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_product_noun_list</span><span class=\"token punctuation\">(</span>product_list<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"product_id\"</span><span class=\"token punctuation\">:</span> product<span class=\"token punctuation\">[</span><span class=\"token string\">'product_id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"category_id\"</span><span class=\"token punctuation\">:</span> product<span class=\"token punctuation\">[</span><span class=\"token string\">'category_id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"title_noun\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>okt<span class=\"token punctuation\">.</span>nouns<span class=\"token punctuation\">(</span>product<span class=\"token punctuation\">[</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"description_noun\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>okt<span class=\"token punctuation\">.</span>nouns<span class=\"token punctuation\">(</span>product<span class=\"token punctuation\">[</span><span class=\"token string\">'description'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">for</span> product <span class=\"token keyword\">in</span> tqdm_notebook<span class=\"token punctuation\">(</span>product_list<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n\n\nproduct_noun_list <span class=\"token operator\">=</span> get_product_noun_list<span class=\"token punctuation\">(</span>product_list<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/39a59ba9c903f143f64f44cb02f7da83/302a4/Screen_Shot_2019-07-12_at_7-751cae5a-ea27-494e-b280-8c20842038b0.56.48_PM.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 7.4074074074074066%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAMklEQVQI12O49fb2/wsvLv6/9PLS/4sE8JvPb/7//PHz/7dv3+D4+/fv/3/8+AGmQXwAcElJ9KIagQMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Screen Shot 2019 07 12 at 7 751cae5a ea27 494e b280 8c20842038b0 56 48 PM\"\n        title=\"\"\n        src=\"/static/39a59ba9c903f143f64f44cb02f7da83/fcda8/Screen_Shot_2019-07-12_at_7-751cae5a-ea27-494e-b280-8c20842038b0.56.48_PM.png\"\n        srcset=\"/static/39a59ba9c903f143f64f44cb02f7da83/12f09/Screen_Shot_2019-07-12_at_7-751cae5a-ea27-494e-b280-8c20842038b0.56.48_PM.png 148w,\n/static/39a59ba9c903f143f64f44cb02f7da83/e4a3f/Screen_Shot_2019-07-12_at_7-751cae5a-ea27-494e-b280-8c20842038b0.56.48_PM.png 295w,\n/static/39a59ba9c903f143f64f44cb02f7da83/fcda8/Screen_Shot_2019-07-12_at_7-751cae5a-ea27-494e-b280-8c20842038b0.56.48_PM.png 590w,\n/static/39a59ba9c903f143f64f44cb02f7da83/efc66/Screen_Shot_2019-07-12_at_7-751cae5a-ea27-494e-b280-8c20842038b0.56.48_PM.png 885w,\n/static/39a59ba9c903f143f64f44cb02f7da83/302a4/Screen_Shot_2019-07-12_at_7-751cae5a-ea27-494e-b280-8c20842038b0.56.48_PM.png 1080w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>jupyter notebook 환경에서 실행하면서 tqdm으로 iteration을 살펴봤습니다. 1초당 약 13.46 바퀴를 돌았고 100개의 데이터를 처리하는데 약 7초 정도가 걸렸습니다. 아마 konlpy 코어가 자바로 구성되어 JPype을 통해 자바를 돌리는 시간이 오래 걸린 것 같습니다.</p>\n<p>2.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">tfidf_vectorizer <span class=\"token operator\">=</span> TfidfVectorizer<span class=\"token punctuation\">(</span>min_df<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_similar_products</span><span class=\"token punctuation\">(</span>product_noun_list<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> field<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> top_n<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    output <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n    tfidf_matrix <span class=\"token operator\">=</span> tfidf_vectorizer<span class=\"token punctuation\">.</span>fit_transform<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>product<span class=\"token punctuation\">[</span>field<span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> product <span class=\"token keyword\">in</span> product_noun_list<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    doc_similarities <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>tfidf_matrix <span class=\"token operator\">*</span> tfidf_matrix<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">for</span> idx<span class=\"token punctuation\">,</span> similarities <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span>doc_similarities<span class=\"token punctuation\">.</span>toarray<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        top_similar_product_indices <span class=\"token operator\">=</span> similarities<span class=\"token punctuation\">.</span>argsort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token punctuation\">(</span>top_n<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span>\n        output<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"product_id\"</span><span class=\"token punctuation\">:</span> product_noun_list<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'product_id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"top_similar_products\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n                    <span class=\"token string\">\"product_id\"</span><span class=\"token punctuation\">:</span> product_noun_list<span class=\"token punctuation\">[</span>similar_idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'product_id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"similarity\"</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>similarities<span class=\"token punctuation\">[</span>similar_idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">for</span> similar_idx <span class=\"token keyword\">in</span> top_similar_product_indices<span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> output\n\ntitle_similar_products <span class=\"token operator\">=</span> get_similar_products<span class=\"token punctuation\">(</span>product_noun_list<span class=\"token punctuation\">,</span> <span class=\"token string\">'title_noun'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\ndescription_similar_products <span class=\"token operator\">=</span> get_similar_products_new<span class=\"token punctuation\">(</span>product_noun_list<span class=\"token punctuation\">,</span> <span class=\"token string\">'title_noun'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>title_similar_products<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n    &#39;product_id&#39;: &#39;xxxxx&#39;,\n    &#39;top_similar_products&#39;: [\n        {&#39;product_id&#39;: &#39;xxxx&#39;, &#39;similarity&#39;: 0.280641},\n        {&#39;product_id&#39;: &#39;xxxx&#39;, &#39;similarity&#39;: 0.182949},\n        {&#39;product_id&#39;: &#39;xxxx&#39;, &#39;similarity&#39;: 0.180826},\n        {&#39;product_id&#39;: &#39;xxxx&#39;, &#39;similarity&#39;: 0.156225},\n        {&#39;product_id&#39;: &#39;xxxx&#39;, &#39;similarity&#39;: 0.137592}\n    ]\n}</code></pre></div>\n<p>product_id는 모두 xxxx로 표기했습니다.</p>\n<p>3.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">CATEGORY_DICT <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">for</span> product <span class=\"token keyword\">in</span> <span class=\"token punctuation\">(</span>product_list<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    CATEGORY_DICT<span class=\"token punctuation\">[</span>product<span class=\"token punctuation\">[</span><span class=\"token string\">'product_id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> product<span class=\"token punctuation\">[</span><span class=\"token string\">'category_id'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_ratio_list_of_same_category</span><span class=\"token punctuation\">(</span>similar_products<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    ratio_list_of_same_category <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">for</span> target_product <span class=\"token keyword\">in</span> similar_products<span class=\"token punctuation\">:</span>\n        category_of_target_product <span class=\"token operator\">=</span> CATEGORY_DICT<span class=\"token punctuation\">[</span>target_product<span class=\"token punctuation\">[</span><span class=\"token string\">'product_id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n        category_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>CATEGORY_DICT<span class=\"token punctuation\">[</span>product<span class=\"token punctuation\">[</span><span class=\"token string\">'product_id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> product <span class=\"token keyword\">in</span> target_product<span class=\"token punctuation\">[</span><span class=\"token string\">'top_similar_products'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n\n        same_category_ratio <span class=\"token operator\">=</span> category_list<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span>category_of_target_product<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>category_list<span class=\"token punctuation\">)</span>\n        ratio_list_of_same_category<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"product_id\"</span><span class=\"token punctuation\">:</span> target_product<span class=\"token punctuation\">[</span><span class=\"token string\">\"product_id\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"same_category_ratio\"</span><span class=\"token punctuation\">:</span> same_category_ratio\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> ratio_list_of_same_category\n\ntitle_ratio_list_of_same_category <span class=\"token operator\">=</span> get_ratio_list_of_same_category<span class=\"token punctuation\">(</span>title_similar_products<span class=\"token punctuation\">)</span>\ndesc_ratio_list_of_same_category <span class=\"token operator\">=</span> get_ratio_list_of_same_category<span class=\"token punctuation\">(</span>description_similar_products<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>title_ratio_list_of_same_category<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[\n    {&#39;product_id&#39;: &#39;xxxx&#39;, &#39;same_category_ratio&#39;: 0.3},\n    {&#39;product_id&#39;: &#39;xxxx&#39;, &#39;same_category_ratio&#39;: 0.2},\n    {&#39;product_id&#39;: &#39;xxxx&#39;, &#39;same_category_ratio&#39;: 0.4},\n    {&#39;product_id&#39;: &#39;xxxx&#39;, &#39;same_category_ratio&#39;: 0.6},\n    {&#39;product_id&#39;: &#39;xxxx&#39;, &#39;same_category_ratio&#39;: 0.4},\n    ...\n]</code></pre></div>\n<p>4.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">get_avaerage_of_ratio</span><span class=\"token punctuation\">(</span>ratio_list_of_same_category<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    ratio_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>dc<span class=\"token punctuation\">[</span><span class=\"token string\">'same_category_ratio'</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> dc <span class=\"token keyword\">in</span> ratio_list_of_same_category<span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span> <span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>ratio_list<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>ratio_list<span class=\"token punctuation\">)</span>\n\ntitle_avaerage_of_ratio <span class=\"token operator\">=</span> get_avaerage_of_ratio<span class=\"token punctuation\">(</span>title_ratio_list_of_same_category<span class=\"token punctuation\">)</span>\ndesc_avaerage_of_ratio <span class=\"token operator\">=</span> get_avaerage_of_ratio<span class=\"token punctuation\">(</span>desc_ratio_list_of_same_category<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"title 기준 타겟 클래스와 카테고리가 일치하는 비율의 평균: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>title_avaerage_of_ratio<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"description 기준 타겟 클래스와 카테고리가 일치하는 비율의 평균: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>desc_avaerage_of_ratio<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">title 기준 타겟 클래스와 카테고리가 일치하는 비율의 평균: 0.224\ndescription 기준 타겟 클래스와 카테고리가 일치하는 비율의 평균: 0.425</code></pre></div>\n<h2>Conclusion</h2>\n<p>기존 카테고리 기반 클래스 군집화와 클래스 제목, 설명을 기준으로 유사도 분석 결과 비교까지 해봤습니다. 다음 글에서는 이렇게 구한 유사 클래스 목록을 DB에 저장하고 새로운 클래스가 추가될 때마다 데이터를 update하여 서버를 다시 시작하지 않아도 API를 지속적으로 제공하는 추천 서버의 배포 과정을 소개하겠습니다.</p>\n<h2>참고</h2>\n<p>(a) konlpy의 Okt(구 Twitter)는 여러 클래스 중 유일하게 pos tagging에서 토큰을 normalize하는 기능을 사용할 수 있다.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4401cc05f124256703bc0d878e08d016/c7dcc/Screen_Shot_2019-07-12_at_5-f83b6304-cdd1-4a5a-b5fe-d5104eefe6b6.42.03_PM.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 30.42121684867395%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABIElEQVQY04VRSU7EQAzM5+EXfABx5QQ3lBtX9kFkX3rNMpOeLJOiOtJwmAuWLHfbZbuqO0jSFFGcQCqNPL9GUT5CqQOkFKiFZF5CyBZV3WFZFpxOpz/393PubIFzDmmWI05SJOknsizCTxQhLwrEccx7zdoTMfeoKsWlBRJiq6rezr7Xu3NHzPOMwE/N8hxfu28y0WjbAdZOMLZhNOh7QOtnCHEH2+yZs8RJRtabBsZYKtKbmp7gwNNt224DOjdhXQ3jA2WMlANMU4hx3MGrGscj/rNgXVduVKSdcVtHKW8IwyvmSkov8P5xg5fXWypIyURy6Ajf44n4eOnB5Qbb9PyAw8a6FoLnPYf3KMsS2hg+BSVTntJ6qw/DsPX5Yd5+AQa1x3Tgw0kIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Screen Shot 2019 07 12 at 5 f83b6304 cdd1 4a5a b5fe d5104eefe6b6 42 03 PM\"\n        title=\"\"\n        src=\"/static/4401cc05f124256703bc0d878e08d016/fcda8/Screen_Shot_2019-07-12_at_5-f83b6304-cdd1-4a5a-b5fe-d5104eefe6b6.42.03_PM.png\"\n        srcset=\"/static/4401cc05f124256703bc0d878e08d016/12f09/Screen_Shot_2019-07-12_at_5-f83b6304-cdd1-4a5a-b5fe-d5104eefe6b6.42.03_PM.png 148w,\n/static/4401cc05f124256703bc0d878e08d016/e4a3f/Screen_Shot_2019-07-12_at_5-f83b6304-cdd1-4a5a-b5fe-d5104eefe6b6.42.03_PM.png 295w,\n/static/4401cc05f124256703bc0d878e08d016/fcda8/Screen_Shot_2019-07-12_at_5-f83b6304-cdd1-4a5a-b5fe-d5104eefe6b6.42.03_PM.png 590w,\n/static/4401cc05f124256703bc0d878e08d016/c7dcc/Screen_Shot_2019-07-12_at_5-f83b6304-cdd1-4a5a-b5fe-d5104eefe6b6.42.03_PM.png 641w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2>참고문헌</h2>\n<p><strong>논문 및 학술자료</strong></p>\n<p><span id=\"footnote-1\">[1]</span> Sasiporn Tongman ・ Niwan Wattanakitrungroj, &#x3C;Classifying Positive or Negative Text Using Features Based on Opinion Words and Term Frequency - Inverse Document Frequency>, 5th International Conference on Advanced Informatics: Concept Theory and Applications (ICAICTA), 2018, p.161.</p>\n<p><strong>웹사이트</strong></p>\n<ul>\n<li>Euclidean distance, Wikipedia, <a href=\"https://en.wikipedia.org/wiki/Euclidean_distance\" target=\"_blank\" rel=\"nofollow\">https:// en.wikipedia.org/wiki/Euclidean_distance</a> 참조. (2019.07.12)</li>\n<li>Taxicab geometry, Wikipedia, <a href=\"https://en.wikipedia.org/wiki/Taxicab_geometry\" target=\"_blank\" rel=\"nofollow\">https:// en.wikipedia.org/wiki/Taxicab_geometry</a> 참조. (2019.07.12)</li>\n<li>Cosine similarity, Wikipedia, <a href=\"https://en.wikipedia.org/wiki/Cosine_similarity\" target=\"_blank\" rel=\"nofollow\">https:// en.wikipedia.org/wiki/Cosine_similarity</a> 참조. (2019.07.12)</li>\n<li>TF-IDF, Wikipedia, <a href=\"https://en.wikipedia.org/wiki/Tf%E2%80%93idf\" target=\"_blank\" rel=\"nofollow\">https:// en.wikipedia.org/wiki/Tf–idf</a> 참조. (2019.07.12)</li>\n<li>Okt class, KoNLPy, <a href=\"http://konlpy.org/en/latest/api/konlpy.tag/\" target=\"_blank\" rel=\"nofollow\">http:// konlpy.org/en/latest/api/konlpy.tag/</a> 참조. (2019.07.12)</li>\n</ul>","fields":{"slug":"blog/2019/07/16/esmond","language":"ko"},"frontmatter":{"title":"TF-IDF를 활용한 클래스 유사도 분석과 추천 서버 구축 1편","thumbnail":"/images/thumbnails/tf-idf.png","date":"2019-07-16","description":"","author":{"id":"esmond","profileImage":"/images/profiles/esmond.png","description":"안녕하세요. 애즈먼입니다.","github":"https://github.com/EsmondCho","blog":"","linkedin":"https://www.linkedin.com/in/esmond-cho-705bba168/"},"tags":["typescript","monorepo"]}}},"pageContext":{"slug":"blog/2019/07/16/esmond","language":"ko","previous":{"fields":{"slug":"blog/2019/07/16/lama","authorId":"lama","language":"ko"},"frontmatter":{"title":"Python 서버 개발자 관점에서 본 TypeScript, JavaScript","thumbnail":"/images/thumbnails/typescript.png","author":{"id":"lama","profileImage":"/images/profiles/lama.jpg","description":"넓은 경험을 가지고 싶은 개발자입니다.","github":"","blog":"","linkedin":""},"tags":["typescript","javascript"],"description":"","date":"2019-07-16T14:12:03.284Z"}},"next":{"fields":{"slug":"blog/2019/07/18/john","authorId":"john","language":"ko"},"frontmatter":{"title":"기술 블로그를 왜 운영해야 할까?","thumbnail":"/images/thumbnails/tech-blog.png","author":{"id":"john","profileImage":"/images/profiles/john.png","description":"클래스101의 브랜드 매니저입니다.","github":"","blog":"","linkedin":""},"tags":["tech blog"],"description":"","date":"2019-07-18T22:12:03.284Z"}}}}}